(this["webpackJsonpmy-stock-quote"]=this["webpackJsonpmy-stock-quote"]||[]).push([[0],{122:function(e,t,r){e.exports=r(242)},127:function(e,t,r){},128:function(e,t,r){},212:function(e,t){},214:function(e,t){},241:function(e,t,r){},242:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(24),c=r.n(i),o=(r(127),r(128),r(17)),s=r(25),l=r(120),u=r(114),h=r(38),f=r(121),d=r(11),m=(r(189),r(13)),y=r.n(m),k=r(15),b=r.n(k),p=r(30),E=r(119),v=r.n(E),S=r(37),P=r.n(S),R=function e(){Object(o.a)(this,e)};function w(e,t){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(b.a.mark((function e(t,r){var a,n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=R.Rates){e.next=3;break}return e.next=3,P.a.get("https://cors-anywhere.herokuapp.com/https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml").then((function(e){for(var t,r=(new DOMParser).parseFromString(e.data,"text/xml"),a=r.createNSResolver(r.documentElement),n=r.evaluate("/gesmes:Envelope/*[name()='Cube']/*[name()='Cube']/*[name()='Cube']",r.documentElement,a,XPathResult.ANY_TYPE,null),i=[];null!=(t=n.iterateNext());){var c=t.getAttribute("currency"),o=t.getAttribute("rate");i.push({currency:c,rate:parseFloat(o)}),"GBP"===c&&i.push({currency:"GBp",rate:100*parseFloat(o)})}i.push({currency:"EUR",rate:1}),R.Rates=i}));case 3:if(null!=R.Rates){e.next=5;break}throw new Error("Failed to load the exchange rate file");case 5:if(null!=(a=R.Rates.find((function(e){return e.currency===t})))){e.next=8;break}throw new Error("Failed to retrieve a rate for "+t);case 8:if(null!=(n=R.Rates.find((function(e){return e.currency===r})))){e.next=11;break}throw new Error("Failed to retrieve a rate for "+n);case 11:return i=1/a.rate*n.rate,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=P.a.create({baseURL:"https://cors-anywhere.herokuapp.com"});function M(e,t){y.a.isArray(e)||(e=[e]);var r="https://query1.finance.yahoo.com/v7/finance/quote?symbols="+y.a.join(e,",");return null==t?r:r+"&fields="+y.a.join(t,",")}var U="regularMarketPreviousClose",x="regularMarketPrice",O=(Symbol,function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"Load",value:function(){var e=Object(p.a)(b.a.mark((function e(t,r){var a,n,i,c,o,s,l,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Date.now(),n=[],i=t.length-1;i>=0;i--)c=t[i],null!=(o=localStorage.getItem(c))&&(o=JSON.parse(o),a-o.Date<3e5?(n.push(o),t.splice(i,1)):localStorage.removeItem(c));s=y.a.chunk(t,50),l=0;case 5:if(!(l<s.length)){e.next=14;break}return u=s[l],e.next=9,C.get("/"+M(u,r)).then((function(e){return e.data.quoteResponse.result}));case 9:e.sent.forEach((function(e){e.Date=a,localStorage.setItem(e.symbol,JSON.stringify(e)),n.push(e)}));case 11:l++,e.next=5;break;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}()),D=function(){function e(){Object(o.a)(this,e),this.NumberOfShares=0,this.MarketCost=0,this.MarketCostEUR=0,this.MarketPrice=0,this.MarketPriceEUR=0,this.Transactions=[],this.PastGain=0,this.PastGainEUR=0,this.RateToEUR=1}return Object(s.a)(e,[{key:"PriceInEur",value:function(){return this.NumberOfShares*this.Security.Price*this.RateToEUR}},{key:"getGain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null==this.MarketPrice||null==this.MarketCost?null:0===this.NumberOfShares?null:e?this.MarketPriceEUR-this.MarketCostEUR:this.MarketPrice-this.MarketCost}},{key:"getPriceDiff",value:function(){var e=null==this.Security?null:this.Security.regularMarketPrice,t=null==this.Security?null:this.Security.regularMarketPreviousClose;return null==e||null==t?null:100*(e/t-1)}}]),e}(),N=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"updateCurrency",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.a.forEach(t,(function(e){e.Ticker.indexOf(".")<0?e.Currency="USD":e.Ticker.endsWith(".SW")?e.Currency="CHF":e.Ticker.endsWith(".L")?e.Currency="GBp":e.Ticker.endsWith(".OL")?e.Currency="NOK":e.Currency="EUR"})),r=0;case 2:if(!(r<t.length)){e.next=10;break}if("EUR"===t[r].Currency){e.next=7;break}return e.next=6,w(t[r].Currency,"EUR");case 6:t[r].RateToEUR=e.sent;case 7:r++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),G=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"Load",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var r,a,n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,P.a.get(t).then((function(e){var t=v()(e.data,{columns:!0});y.a.forEach(t,(function(e){e.Shares=Math.abs(parseFloat(e.Shares)),e.Price=parseFloat(e.Price),e.Commission=parseFloat(e.Commission);var t=y.a.find(r,(function(t){return t.Ticker===e.Symbol}));switch(null==t&&((t=new D).Ticker=e.Symbol,t.Name=e.Name,r.push(t)),e.Type.toLowerCase()){case"buy":t.NumberOfShares+=e.Shares,t.MarketCost+=e.Shares*e.Price+e.Commission,t.Transactions.push(e);break;case"sell":for("PUM.DE"===e.symbol&&console.log("");e.Shares>0;){var a=y.a.last(t.Transactions),n=Math.min(a.Shares,e.Shares);t.MarketCost-=n*a.Price+a.Commission,t.NumberOfShares-=n,a.Shares-=n,e.Shares-=n,t.PastGain+=n*(e.Price-a.Price),0===a.Shares&&t.Transactions.pop()}break;case"deposit cash":t.PastGain+=e.Commission}}))}));case 3:return e.next=5,N.updateCurrency(r);case 5:return a=r.filter((function(e){return e.NumberOfShares>0})).map((function(e){return e.Ticker})),n=new O,e.next=9,n.Load(a,[x,U]);case 9:return i=e.sent,r.forEach((function(e){return e.Security=i.find((function(t){return t.symbol===e.Ticker}))})),r.forEach((function(e){e.MarketCostEUR=e.RateToEUR*e.MarketCost,e.PastGainEUR=e.RateToEUR*e.PastGain,null!=e.Security&&null!=e.Security.regularMarketPrice&&(e.MarketPrice=e.Security.regularMarketPrice*e.NumberOfShares,e.MarketPriceEUR=e.RateToEUR*e.MarketPrice)})),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),j=(r(241),function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={portfolio:[],marketCost:0,marketPrice:0,pastGain:0,gain:0,dividendYield:0,sortBy:"Name",sortDirection:d.c.ASC,displayInEUR:!1},r._sort=r._sort.bind(Object(h.a)(r)),r.handleCheck=r.handleCheck.bind(Object(h.a)(r)),r.renderPrice=r.renderPrice.bind(Object(h.a)(r)),r}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;(new G).Load("https://raw.githubusercontent.com/lionelschiepers/MyStock/master/MyStockWeb/Data/1.csv").then((function(t){e.setState({portfolio:t});var r=0,a=0,n=0;t.forEach((function(e){n+=e.PastGainEUR,Number.isNaN(e.MarketCostEUR)||Number.isNaN(e.MarketPriceEUR)||(r+=e.MarketCostEUR,a+=e.MarketPriceEUR)}));var i=0===r?0:a/r-1;e.setState({marketCost:r,marketPrice:a,gain:i,pastGain:n})}))}},{key:"_internalSort",value:function(e,t,r){var a=y.a.sortBy(e,(function(e){if("Diff"===t){var a=e.getPriceDiff();return 0===e.NumberOfShares&&(a=null),null==a&&r===d.c.DESC&&(a=-1e8),a}return y.a.isString(e[t])?e[t].toLowerCase():e[t]}));return r===d.c.DESC&&(a=a.reverse()),a}},{key:"_sort",value:function(e){var t=e.sortBy,r=e.sortDirection,a=this.state.portfolio,n=this._internalSort(a,t,r);this.setState({portfolio:n,sortBy:t,sortDirection:r})}},{key:"renderPrice",value:function(e){var t=e.cellData,r=(e.columnData,e.columnIndex,e.dataKey),a=(e.isScrolling,e.rowData),i=(e.rowIndex,"");if("Security.regularMarketPrice"===r&&null!=a.Security&&null!=t&&(i=a.Currency),"NumberOfShares"===r)return n.a.createElement("div",null,null==t?"":t.toFixed(0));if("Diff"===r){var c=null==a.Security?null:a.Security.regularMarketPrice,o=null==a.Security?null:a.Security.regularMarketPreviousClose;if(null==c||null==o)return n.a.createElement("div",null);t=100*(c/o-1),i="%"}return"MarketCost"===r&&this.state.displayInEUR&&(t=a.MarketCostEUR),"MarketPrice"===r&&this.state.displayInEUR&&(t=a.MarketPriceEUR),"PastGain"===r&&this.state.displayInEUR&&(t=a.PastGainEUR),"MarketCost"!==r&&"MarketPrice"!==r||0!==t||(t=null),n.a.createElement("div",null,null==t?"":t.toFixed(2)," ",i)}},{key:"renderName",value:function(e){e.cellData,e.columnData,e.columnIndex,e.dataKey,e.isScrolling;var t=e.rowData;e.rowIndex;return n.a.createElement("a",{className:"stockName",target:"_blank",rel:"noopener noreferrer",href:"https://finance.yahoo.com/quote/"+t.Ticker},t.Name)}},{key:"handleCheck",value:function(){this.setState({displayInEUR:!this.state.displayInEUR}),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.state,r=t.portfolio,a=t.sortBy,i=t.sortDirection;return n.a.createElement("div",null,n.a.createElement("div",{style:{textAlign:"left"}},"Market Price:",this.state.marketPrice.toLocaleString("fr-BE",{style:"currency",currency:"EUR"}),n.a.createElement("br",null),"Market Cost:",this.state.marketCost.toLocaleString("fr-BE",{style:"currency",currency:"EUR"}),n.a.createElement("br",null),"Gain:",(100*this.state.gain).toFixed(2),"%",n.a.createElement("br",null),"Past Gain:",this.state.pastGain.toLocaleString("fr-BE",{style:"currency",currency:"EUR"}),n.a.createElement("br",null),"Dividend Yield:",this.state.dividendYield.toFixed(2),n.a.createElement("br",null),n.a.createElement("br",null)),n.a.createElement("div",{style:{textAlign:"left"}},n.a.createElement("input",{type:"checkbox",onChange:this.handleCheck,defaultChecked:this.state.displayInEUR})," Display in EUR"),n.a.createElement("div",null,n.a.createElement(d.a,null,(function(t){t.height;var c=t.width;return n.a.createElement(d.d,{width:c,height:1e3,headerHeight:20,rowHeight:30,rowClassName:function(e){var t=e.index;return-1!==t&&t%2===0?"evenRow":-1!==t&&t%2===1?"oddRow":void 0},sort:e._sort,sortBy:a,sortDirection:i,rowCount:r.length,rowGetter:function(e){var t=e.index;return r[t]}},n.a.createElement(d.b,{className:"stockName",width:300,label:"Name",dataKey:"Name",disableSort:!1,cellRenderer:e.renderName}),n.a.createElement(d.b,{width:100,label:"Price",dataKey:"Security.regularMarketPrice",disableSort:!1,cellDataGetter:function(e){var t=e.rowData;return null==t.Security?null:t.Security.regularMarketPrice},cellRenderer:e.renderPrice}),n.a.createElement(d.b,{width:100,label:"Diff",dataKey:"Diff",disableSort:!1,cellDataGetter:function(e){return e.rowData.getPriceDiff()},cellRenderer:e.renderPrice}),n.a.createElement(d.b,{width:100,label:"Shares",dataKey:"NumberOfShares",disableSort:!1,cellRenderer:e.renderPrice}),n.a.createElement(d.b,{width:150,label:"Market Cost",dataKey:"MarketCost",disableSort:!1,cellRenderer:e.renderPrice}),n.a.createElement(d.b,{width:150,label:"Market Price",dataKey:"MarketPrice",disableSort:!1,cellRenderer:e.renderPrice}),n.a.createElement(d.b,{width:150,label:"Gain",disableSort:!1,cellDataGetter:function(t){return t.rowData.getGain(e.state.displayInEUR)},cellRenderer:e.renderPrice}),n.a.createElement(d.b,{width:150,label:"Past Gain",dataKey:"PastGain",disableSort:!1,cellRenderer:e.renderPrice}))})),","))}}]),t}(a.Component));var T=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[122,1,2]]]);
//# sourceMappingURL=main.eadb4b80.chunk.js.map